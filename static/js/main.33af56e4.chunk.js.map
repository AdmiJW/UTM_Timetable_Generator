{"version":3,"sources":["Redux/Actions/ActionTypes.js","LogicUtils/ClashChecker.js","LogicUtils/TimeFlattener.js","LogicUtils/Converters.js","Redux/Reducers/TimetableReducer.js","Testcases/defaultTimetable.js","Redux/Store/Store.js","Redux/Actions/CourseActions.js","Redux/Actions/TimetableActions.js","Redux/Actions/TimeActions.js","Components/CourseList/CourseTimeItem.js","Components/CourseList/CourseItem.js","Components/CourseList/CourseContainer.js","LogicUtils/KonvaFactory.js","LogicUtils/TimetableBaseDrawer.js","LogicUtils/TimetableSlotDrawer.js","LogicUtils/TimetableConfigDeriver.js","Components/TimetablePreviewer.js","Redux/Actions/SettingActions.js","Components/TimetableSettings/SettingLocalStorage.js","Components/TimetableSettings/SettingGeneral.js","Components/TimetableSettings/SettingGridProps.js","Components/TimetableSettings/TimetableSettings.js","Components/Blocker.js","Components/MainDiv.js","index.js"],"names":["ActionTypes","ADD_COURSE","DELETE_COURSE","CHANGE_COURSE_INFO","ADD_TIME","DELETE_TIME","CHANGE_TIME_INFO","VIEW_TIMETABLE","CLOSE_PREVIEW","OPEN_SETTING","CLOSE_SETTING","CHANGE_SETTING","SAVE_SETTING","LOAD_SETTING","DEL_SETTING","clashChecker","courseItems","courseTimeItems","virtualTimetable","courseIndex","courseObject","courseTimes","timeIndex","row","parseInt","dayOfWeek","col","session","slot","undefined","err","Error","course1","course2","timeFlattener","rowLen","length","colLen","reduce","max","curr","Math","resultingArr","timetableEntry","startingSession","endingSession","courseObj","push","dayOfWeekArr","sessionArr","dayOfWeekIndexConverter","isIslamicWeekend","reverseMap","indexOf","sessionIndexConverter","initialState","version","isPreviewOpen","isSettingOpen","nextCourseID","courseID","courseName","lecturerName","courseCode","timeID","nextTimeID","timetableRenderData","settings","theme","courseNameFontSize","lecturerNameFontSize","courseCodeFontSize","gridWidth","gridHeight","noOfSessions","window","localStorage","getItem","JSON","parse","clear","courseFactory","nextID","timetableReducer","state","action","type","newCourseItem","Object","assign","courseIndexToDel","payload","newInfoValues","courseIndexToChange","courseIndexToAdd","newCourseTimes","timeIndexToDel","timeIndexToChange","newTimeValues","e","alert","flattenedVirtualTimetable","eventTarget","settingEvent","target","id","value","min","setItem","stringify","removeItem","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","courseActions","addCourse","deleteCourse","changeCourseInfo","TimetableActions","viewTimetable","closePreview","TimeActions","addTime","deleteTime","changeTimeInfo","CourseTimeItem","props","bind","this","timeItemHTML","document","getElementById","timeInfo","timeDayOfWeekHTML","children","timeSessionHTML","classList","add","setTimeout","className","onClick","onChange","React","PureComponent","connect","dispatch","CourseItem","courseItemHTML","courseItemInfoElements","courseNameHTML","lecturerNameHTML","courseCodeHTML","textContent","keys","map","timeIdx","key","courseInfo","html","spellCheck","timeItemRenderer","CourseActions","CourseContainer","courseItemRenderer","courseContainer","scrollTop","scrollHeight","Component","konvaFactory","rectFactory","x","y","width","height","fill","konva","Rect","listening","textFactory","text","fontSize","fillColor","fontFamily","fontStyle","padding","Text","align","verticalAlign","showWarnings","KonvaFactory","TimetableBaseDrawer","canvas","derivedConfig","margin","dayOfWeeks","times","sessions","themeSettings","timetableWidth","timetableHeight","actualWidth","actualHeight","row1GridHeight","row1ActualHeight","baseBG","labelBG","sideColorBG","oddRowBG","evenRowBG","labelFontColor","firstChild","remove","stage","Stage","container","layer","Layer","layer2","rects","texts","forEach","idx","time","beginTime","endTime","rect","draw","heightDeterminer","heightScale","isLectNameEmpty","isCourseCodeEmpty","lectName","yOffset","isCourseNameEmpty","TimetableSlotDrawer","renderData","courseFontColor","colorMaps","getLayers","course","xPosition","yPosition","themeDeriver","name","timetableConfigDeriver","stateTimetableSettings","slice","sliceDayOfWeekArray","Number","TimetablePreviewer","timetableHTML","createRef","timetableCanvasWindow","closePreviewBtnHandler","downloadBtnHandler","openTabBtnHandler","canvasStage","current","tempLink","createElement","download","href","toDataURL","click","img","Image","src","onload","w","open","write","outerHTML","close","ref","SettingActions","openSetting","closeSetting","changeSetting","saveSetting","loadSetting","delSetting","SettingLocalStorage","role","aria-label","htmlFor","title","SettingGeneral","SettingGridProps","renderProp","style","backgroundColor","color","border","TimetableSettings","renderProperties","settingHTML","closeSettingButtonHandler","newProps","prevState","event","isBlocking","MainDiv","alt","rel","ReactDOM","render","StrictMode","font","FontFaceObserver","load","then","catch","console","log"],"mappings":"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","file":"static/js/main.33af56e4.chunk.js","sourcesContent":["const ActionTypes = {\r\n\r\n    ADD_COURSE : 'ADD_COURSE',                  //  Add a new empty course item to the courses list\r\n    DELETE_COURSE : 'DELETE_COURSE',            //  Delete a course item from the courses list\r\n    CHANGE_COURSE_INFO : 'CHANGE_COURSE_INFO',  //  Change the course info (course Name / lecturer Name/ course Code)\r\n    \r\n    ADD_TIME : 'ADD_TIME',                      //  Add a new course time item to the course item\r\n    DELETE_TIME : 'DELETE_TIME',                //  Delete a course time item from the courses list\r\n    CHANGE_TIME_INFO : 'CHANGE_TIME_INFO',      //  CHange the time info (dayOfWeek / time session)\r\n\r\n    VIEW_TIMETABLE: 'VIEW_TIMETABLE',           //  Opens the timetable preview window\r\n    CLOSE_PREVIEW: 'CLOSE_PREVIEW',             //  Closes the timetable preview window\r\n\r\n    OPEN_SETTING: 'OPEN_SETTING',               //  Opens the settings window\r\n    CLOSE_SETTING: 'CLOSE_SETTING',             //  Closes the settings window\r\n    CHANGE_SETTING: 'CHANGE_SETTING',           //  Change the settings\r\n\r\n    SAVE_SETTING: 'SAVE_SETTING',               //  Saves everything: Courses, Times, Settings\r\n    LOAD_SETTING: 'LOAD_SETTING',               //  Load the saved courses times and settings from Local Storage\r\n    DEL_SETTING: 'DEL_SETTING',                 //  Delete the saved courses times and settings from Local Storage\r\n    \r\n}\r\n\r\nexport default ActionTypes;","\r\n/* =========================================================================================================\r\n    This function, taking in the courseItems and courseTimeItems for each course, will check for clashing\r\n    time slots.\r\n    This is done by a 2D array (virtual Timetable) which has 5 rows, and 11 column each. It iterates through the \r\n    time slots, and will put the courses in the respective slots in the 2D array.\r\n    If the slot is already occupied when trying to insert the course, that means a clash had occurred\r\n\r\n    If clashing occurs, will throw exception.\r\n\r\n    Otherwise, at end of the function, the 2D array (virtual timetable) will be returned for flattening\r\n ========================================================================================================= */\r\nexport default function clashChecker(courseItems, courseTimeItems) {\r\n    const virtualTimetable = [ [], [], [], [], [] ];\r\n\r\n    //  Loop through each timeItems in each courseItems. Put the courseItem into the virtualTimeTable in the\r\n    //  correct slot. If there already exists a item before inserting, a timetable clash occurred.\r\n    for (let courseIndex in courseItems ) {\r\n        const courseObject = courseItems[ courseIndex ];\r\n        const courseTimes = courseTimeItems[ courseIndex ];\r\n\r\n        for (let timeIndex in courseTimes) {\r\n            if (timeIndex === 'nextTimeID') continue;       //  Skip the nextID key\r\n            \r\n            const row = parseInt( courseTimes[timeIndex].dayOfWeek );    //Convert day of week to index\r\n            const col = parseInt( courseTimes[timeIndex].session );        //Convert session to index\r\n\r\n            const slot = virtualTimetable[row][col];\r\n\r\n            //  Clash occurred. Throw an error with information of clashing course and time slot\r\n            if ( slot !== undefined ) {\r\n                const err = new Error();\r\n                err.course1 = slot;\r\n                err.course2 = courseObject;\r\n                err.row = row;\r\n                err.col = col;\r\n                throw err;\r\n            }\r\n\r\n            virtualTimetable[row][col] = courseObject;\r\n        }\r\n    }\r\n    return virtualTimetable;            //  Upon validated, return the virtualTimetable 2D array for flattening\r\n}","\r\n/* =================================================================================================================\r\nBasically takes in the virtual timetable (2D array timetable, each grid may or may not contain a Course JSON Object),\r\nflatten them into one single array of JSON object consisting of information of courses, such that\r\n    >   Neighboring same courses are combined into one entity\r\n    >   No more 2D array. Its 1D array consisting of objects which contains information\r\n        -   dayOfWeek\r\n        -   starting session\r\n        -   ending session\r\n        -   courseObject (Contains courseName, lecturerName, courseCode)\r\n================================================================================================================= */\r\n\r\nfunction timeFlattener ( virtualTimetable ) {\r\n\r\n    const rowLen = virtualTimetable.length;\r\n    const colLen = virtualTimetable.reduce( (max, curr) => Math.max(curr.length, max), 0 );\r\n\r\n    const resultingArr = [];\r\n\r\n    for (let row = 0; row < rowLen; row ++ ) {\r\n        let col = 0;\r\n        while (col < colLen) {\r\n\r\n            //  A course is present in the current position. Create a timetableEntry object specifically for it,\r\n            //  and keep checking if the next grid is also same course. If yes, then extend it.\r\n            if (virtualTimetable[row][col] !== undefined ) {\r\n                const timetableEntry = {\r\n                    dayOfWeek: row,\r\n                    startingSession: col,\r\n                    endingSession: col,\r\n                    courseObj: virtualTimetable[row][col]\r\n                };\r\n                //  Check for next grid if it is same\r\n                while ( col + 1 < colLen && virtualTimetable[row][col + 1] === timetableEntry.courseObj ) {\r\n                    col ++;\r\n                    timetableEntry.endingSession = col;\r\n                }\r\n                resultingArr.push(timetableEntry);\r\n            }\r\n            col++;\r\n        }\r\n    }\r\n\r\n    return resultingArr;\r\n}\r\n\r\n\r\nexport default timeFlattener;","\r\n\r\n/* =================================================================================================================\r\n    Convert from the dayOfWeek or the sessions to their respective row and column index in a 2D array.\r\n\r\n    each function contains a reverseMap default parameter which if set to true, will map from index to the dayOfWeek\r\n    or session.\r\n================================================================================================================= */\r\n\r\nconst dayOfWeekArr = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\r\nconst sessionArr = ['02','03','04','05','06','07','08','09','10','11','12'];\r\n\r\n\r\nconst dayOfWeekIndexConverter = (dayOfWeek, isIslamicWeekend, reverseMap=false) => {\r\n    if (reverseMap) return dayOfWeekArr[dayOfWeek + (isIslamicWeekend? 0: 1) ];\r\n    return dayOfWeekArr.indexOf( dayOfWeek ) - (isIslamicWeekend? 0: 1);\r\n}\r\n\r\nconst sessionIndexConverter = (session, reverseMap=false) => {\r\n    if (reverseMap) return sessionArr[session];\r\n    return sessionArr.indexOf( session );\r\n}\r\n\r\nconst sliceDayOfWeekArray = (isIslamicWeekend) => {\r\n    return isIslamicWeekend? dayOfWeekArr.slice(0, 5): dayOfWeekArr.slice(1);\r\n}\r\n\r\n\r\n\r\nexport { dayOfWeekIndexConverter, sessionIndexConverter, sliceDayOfWeekArray };\r\n\r\n","\r\nimport ActionTypes from '../Actions/ActionTypes';\r\n\r\n//  Timetable Validator and Flattener, and Converter for dayOfWeek and Session\r\nimport clashChecker from '../../LogicUtils/ClashChecker';\r\nimport timeFlattener from '../../LogicUtils/TimeFlattener';\r\nimport { dayOfWeekIndexConverter, sessionIndexConverter } from '../../LogicUtils/Converters.js';\r\n\r\n//  Testcases\r\nimport defaultTimetable from '../../Testcases/defaultTimetable';\r\n\r\n\r\n\r\n\r\n//==============================\r\n//  Initial State\r\n//==============================\r\nconst initialState = defaultTimetable;\r\n\r\n//  Try to load the state from the local storage when the application first starts up\r\n{\r\n    const version = window.localStorage.getItem('version');\r\n    const nextCourseID = window.localStorage.getItem('nextCourseID');\r\n    const courseItems = JSON.parse( window.localStorage.getItem('courseItems') );\r\n    const courseTimeItems = JSON.parse( window.localStorage.getItem('courseTimeItems') );\r\n    const settings = JSON.parse( window.localStorage.getItem('settings') );\r\n\r\n    //  If the version doesn't match, clear the localStorage\r\n    if (!version || version !== initialState.version)\r\n        window.localStorage.clear();\r\n    else if (nextCourseID && courseItems && courseTimeItems && settings) {\r\n        initialState.nextCourseID = parseInt(nextCourseID);\r\n        initialState.courseItems = courseItems;\r\n        initialState.courseTimeItems = courseTimeItems;\r\n        initialState.settings = settings;\r\n    }\r\n}\r\n\r\n\r\n\r\n//==============================\r\n//  Reducer\r\n//==============================\r\nfunction timetableReducer(state = initialState, action ) {\r\n    let { courseItems, courseTimeItems } = state;\r\n\r\n    switch (action.type) {\r\n\r\n        //======================    COURSE ACTIONS ==============================\r\n        \r\n        case ActionTypes.ADD_COURSE: {\r\n            const newCourseItem = courseFactory( state.nextCourseID );\r\n\r\n            courseItems = Object.assign({}, courseItems );\r\n            courseItems[ newCourseItem.courseID ] = newCourseItem;\r\n\r\n            courseTimeItems = Object.assign({}, courseTimeItems );\r\n            courseTimeItems[ newCourseItem.courseID ] = { \r\n                nextTimeID: 0 \r\n            };\r\n\r\n            return Object.assign({}, state, { courseItems, courseTimeItems, nextCourseID: state.nextCourseID+1 } );\r\n        }\r\n\r\n        case ActionTypes.DELETE_COURSE: {\r\n            const { courseIndexToDel }  = action.payload;\r\n\r\n            courseItems = Object.assign( {}, courseItems );\r\n            delete courseItems[ courseIndexToDel ];\r\n\r\n            courseTimeItems = Object.assign( {}, courseTimeItems );\r\n            delete courseTimeItems[ courseIndexToDel ];\r\n\r\n            return Object.assign({}, state, { courseItems, courseTimeItems } );\r\n        }\r\n\r\n        case ActionTypes.CHANGE_COURSE_INFO: {\r\n            const { newInfoValues } = action.payload;\r\n            const courseIndexToChange = newInfoValues.courseID;\r\n\r\n            courseItems = Object.assign({}, courseItems);\r\n            courseItems[ courseIndexToChange ] = newInfoValues;\r\n\r\n            return Object.assign({}, state, { courseItems } );\r\n        }\r\n\r\n        //======================    TIME ACTIONS     ==============================\r\n\r\n        case ActionTypes.ADD_TIME: {\r\n            const { courseIndexToAdd } = action.payload;\r\n\r\n            const nextTimeID = courseTimeItems[courseIndexToAdd].nextTimeID;\r\n\r\n            const newCourseTimes = Object.assign( {}, courseTimeItems[courseIndexToAdd], { nextTimeID: nextTimeID + 1 }  );\r\n            newCourseTimes[ nextTimeID ] = {\r\n                timeID: nextTimeID,\r\n                dayOfWeek: 0,\r\n                session: 0\r\n            };\r\n            courseTimeItems = Object.assign( {}, courseTimeItems );\r\n            courseTimeItems[ courseIndexToAdd ] = newCourseTimes;\r\n            \r\n            return Object.assign({}, state, { courseTimeItems } );\r\n        }\r\n        case ActionTypes.DELETE_TIME: {\r\n            const { courseIndexToDel, timeIndexToDel } = action.payload;\r\n\r\n            const newCourseTimes = Object.assign( {}, courseTimeItems[ courseIndexToDel ] );\r\n            delete newCourseTimes[ timeIndexToDel ];\r\n\r\n            courseTimeItems = Object.assign( {}, courseTimeItems );\r\n            courseTimeItems[ courseIndexToDel ] = newCourseTimes;\r\n\r\n            return Object.assign({}, state, { courseTimeItems } );\r\n        }\r\n        case ActionTypes.CHANGE_TIME_INFO: {\r\n            const { courseIndexToChange, timeIndexToChange, newTimeValues } = action.payload;    \r\n            \r\n            const newCourseTimes = Object.assign( {}, courseTimeItems[ courseIndexToChange ] );\r\n            newCourseTimes[ timeIndexToChange ] = newTimeValues;\r\n\r\n            courseTimeItems = Object.assign( {}, courseTimeItems );\r\n            courseTimeItems[ courseIndexToChange ] = newCourseTimes;\r\n\r\n            return Object.assign( {}, state, { courseTimeItems } );\r\n        }\r\n\r\n        //======================    PREVIEW TIMETABLE ACTIONS     ==============================\r\n\r\n        case ActionTypes.VIEW_TIMETABLE: {\r\n            // Check for clashing time slots\r\n            let virtualTimetable = null;\r\n            try {\r\n                virtualTimetable = clashChecker( state.courseItems, state.courseTimeItems );\r\n            } catch (e) {\r\n                //  If found the clashing timeslot, then alert the user. Don't change state\r\n                window.alert(\r\n                    'Clashing Timetable Detected!\\nThe course:\\n\\n' +\r\n                    `${e.course1.courseName}, ${e.course1.lecturerName}, ${e.course1.courseCode}\\n\\n` +\r\n                    'Clashes with:\\n\\n' +\r\n                    `${e.course2.courseName}, ${e.course2.lecturerName}, ${e.course2.courseCode}\\n\\n` +\r\n                    'At timeslot:\\n' +\r\n                    `   ${dayOfWeekIndexConverter(e.row, state.settings.isIslamicWeekend, true)}, ${sessionIndexConverter(e.col, true)}`\r\n                );  \r\n                return state;\r\n            }\r\n            const flattenedVirtualTimetable = timeFlattener( virtualTimetable );\r\n\r\n            return Object.assign({}, state, { timetableRenderData: flattenedVirtualTimetable, isPreviewOpen: true } );\r\n        }\r\n\r\n        case ActionTypes.CLOSE_PREVIEW: {\r\n            return Object.assign({}, state, { isPreviewOpen: false} );\r\n        }\r\n\r\n        //======================    SETTING ACTIONS     ==============================\r\n\r\n        case ActionTypes.OPEN_SETTING: {\r\n            return Object.assign({}, state, { isSettingOpen: true} );\r\n        }\r\n\r\n        case ActionTypes.CLOSE_SETTING: {\r\n            return Object.assign({}, state, { isSettingOpen: false} );\r\n        }\r\n\r\n        case ActionTypes.CHANGE_SETTING: {\r\n            const eventTarget = action.payload.settingEvent.target;\r\n            const settings = Object.assign({}, state.settings);\r\n            switch( eventTarget.id ) {\r\n                case 'theme':\r\n                    settings.theme = eventTarget.value;\r\n                    break;\r\n                case 'weekend':\r\n                    settings.isIslamicWeekend = eventTarget.value === '0'? true: false;\r\n                    break;\r\n                case 'courseName-fontsize':\r\n                    settings.courseNameFontSize = Math.min( 70, Math.max(eventTarget.value, 0) );\r\n                    break;\r\n                case 'lecturerName-fontsize':\r\n                    settings.lecturerNameFontSize = Math.min( 70, Math.max(eventTarget.value, 0) );\r\n                    break;\r\n                case 'courseCode-fontsize':\r\n                    settings.courseCodeFontSize = Math.min( 70, Math.max(eventTarget.value, 0) );\r\n                    break;\r\n                case 'noOfSessions':\r\n                    settings.noOfSessions = eventTarget.value;\r\n                    break;\r\n                case 'gridWidth':\r\n                    settings.gridWidth = Math.min( 400, Math.max(eventTarget.value, 0) );\r\n                    break;\r\n                case 'gridHeight':\r\n                    settings.gridHeight = Math.min( 400, Math.max(eventTarget.value, 0) );\r\n                    break;\r\n                default:\r\n                    return state;\r\n            }\r\n            return Object.assign({}, state, { settings });\r\n        }\r\n\r\n        case ActionTypes.SAVE_SETTING: {\r\n            try {\r\n                window.localStorage.setItem('version', state.version);\r\n                window.localStorage.setItem(\"nextCourseID\", state.nextCourseID);\r\n                window.localStorage.setItem(\"courseItems\", JSON.stringify(state.courseItems) );\r\n                window.localStorage.setItem(\"courseTimeItems\", JSON.stringify(state.courseTimeItems) );\r\n                window.localStorage.setItem(\"settings\", JSON.stringify(state.settings) );\r\n                \r\n                window.alert(\"Course Informations and Settings Saved To Local Storage!\");\r\n            } catch {\r\n                window.alert(\"Unable to save to local Storage\");\r\n            }\r\n            return state;\r\n        }\r\n\r\n        case ActionTypes.LOAD_SETTING: {\r\n            try {\r\n                const nextCourseID = parseInt(window.localStorage.getItem('nextCourseID') );\r\n                const courseItems = JSON.parse( window.localStorage.getItem('courseItems') );\r\n                const courseTimeItems = JSON.parse( window.localStorage.getItem(\"courseTimeItems\") );\r\n                const settings = JSON.parse( window.localStorage.getItem(\"settings\") );\r\n\r\n                if (!nextCourseID || !courseItems || !courseTimeItems || !settings ) throw Error;\r\n\r\n                window.alert(\"Successfully loaded saved state from local storage\");\r\n                \r\n                return Object.assign({}, state, { nextCourseID, courseItems, courseTimeItems, settings} );\r\n            } catch {\r\n                window.alert(\"Unable to load from local Storage\");\r\n            }\r\n            return state;\r\n        }\r\n\r\n        case ActionTypes.DEL_SETTING: {\r\n            window.localStorage.removeItem('nextCourseID');\r\n            window.localStorage.removeItem('courseItems');\r\n            window.localStorage.removeItem('courseTimeItems');\r\n            window.localStorage.removeItem('settings');\r\n\r\n            window.alert('Successfully cleared saved state from local storage!');\r\n            return state;\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n/* ===============================\r\n    Creates an Empty Course\r\n================================ */\r\nconst courseFactory = ( nextID ) => {\r\n    return {\r\n        courseID: nextID ++,\r\n        courseName: 'Course Name',\r\n        lecturerName: 'Lecturer Name',\r\n        courseCode: 'Course Code'\r\n    };\r\n};\r\n\r\n\r\nexport default timetableReducer;\r\n","const defaultTimetable = {\r\n    version: '1.1.0',\r\n\r\n    isPreviewOpen: false,\r\n    isSettingOpen: false,\r\n\r\n    nextCourseID: 1,\r\n\r\n    courseItems: {\r\n        '0': {\r\n        courseID: 0,\r\n        courseName: 'Course Name',\r\n        lecturerName: 'Lecturer Name',\r\n        courseCode: 'Course Code'\r\n        }\r\n    },\r\n\r\n    courseTimeItems: {\r\n        '0': {\r\n            '0': {\r\n                timeID: 0,\r\n                dayOfWeek: 0,\r\n                session: 0\r\n            },\r\n            nextTimeID: 1\r\n        }\r\n    },\r\n\r\n    timetableRenderData: null,\r\n\r\n    settings: {\r\n        theme: 'default',\r\n        isIslamicWeekend: true,\r\n\r\n        courseNameFontSize: 25, \r\n        lecturerNameFontSize: 15,\r\n        courseCodeFontSize: 13,\r\n\r\n        gridWidth: 200,\r\n        gridHeight: 150,\r\n\r\n        noOfSessions: 12\r\n    }\r\n}\r\n\r\nexport default defaultTimetable;","import { createStore } from 'redux'\r\n\r\nimport timetableReducer from '../Reducers/TimetableReducer';\r\n\r\nconst store = createStore( timetableReducer,\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__() );\r\n\r\nexport default store;","import ActionTypes from './ActionTypes';\r\n\r\n\r\nconst courseActions = {\r\n    addCourse: function () {\r\n        return {\r\n            type: ActionTypes.ADD_COURSE\r\n        };\r\n    },\r\n    \r\n    deleteCourse: function( courseIndexToDel ) {\r\n        return {\r\n            type: ActionTypes.DELETE_COURSE,\r\n            payload: {\r\n                courseIndexToDel\r\n            }\r\n        };\r\n    },\r\n\r\n    //  Change Course Name, Lecturer Name, or Course Code\r\n    changeCourseInfo: function( newInfoValues ) {\r\n        return {\r\n            type: ActionTypes.CHANGE_COURSE_INFO,\r\n            payload: {\r\n                newInfoValues\r\n            }\r\n        };\r\n    }\r\n\r\n}\r\n\r\nexport default courseActions;\r\n","import ActionTypes from './ActionTypes';\r\n\r\n\r\nconst TimetableActions = {\r\n\r\n    viewTimetable: function() {\r\n        return {\r\n            type: ActionTypes.VIEW_TIMETABLE\r\n        };\r\n    },\r\n\r\n    closePreview: function() {\r\n        return {\r\n            type: ActionTypes.CLOSE_PREVIEW\r\n        };\r\n    }\r\n\r\n};\r\n\r\nexport default TimetableActions;","import ActionTypes from './ActionTypes';\r\n\r\n\r\nconst TimeActions = {\r\n\r\n    addTime: function( courseIndexToAdd ) {\r\n        return {\r\n            type: ActionTypes.ADD_TIME,\r\n            payload: {\r\n                courseIndexToAdd\r\n            }\r\n        };\r\n    },\r\n\r\n    deleteTime: function( courseIndexToDel, timeIndexToDel ) {\r\n        return {\r\n            type: ActionTypes.DELETE_TIME,\r\n            payload: {\r\n                courseIndexToDel, timeIndexToDel\r\n            }\r\n        };\r\n    },\r\n\r\n    changeTimeInfo: function ( courseIndexToChange, timeIndexToChange, newTimeValues ) {\r\n        return {\r\n            type: ActionTypes.CHANGE_TIME_INFO,\r\n            payload: {\r\n                courseIndexToChange, timeIndexToChange, newTimeValues \r\n            }\r\n        };\r\n    }\r\n\r\n};\r\n\r\nexport default TimeActions;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n//  DayOfWeek and Session Converter\r\nimport { dayOfWeekIndexConverter } from '../../LogicUtils/Converters';\r\n\r\n//  Redux Action Creator\r\nimport TimeActions from '../../Redux/Actions/TimeActions';\r\n\r\n\r\n\r\n\r\nclass CourseTimeItem extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.deleteTime = this.deleteTime.bind(this);\r\n        this.changeTimeInfo = this.changeTimeInfo.bind(this);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.timeItemHTML = document.getElementById(`course-item__times__entry-${ this.props.courseID}-${ this.props.timeInfo.timeID }`);\r\n\r\n        this.timeDayOfWeekHTML = this.timeItemHTML.children[1];\r\n        this.timeSessionHTML = this.timeItemHTML.children[2];\r\n    }\r\n\r\n\r\n    //  Allow the div to have fade out animation first, then only we actually remove the div\r\n    deleteTime() {\r\n        this.timeItemHTML.classList.add('fade-out');\r\n\r\n        setTimeout(() => {\r\n            this.props.deleteTime( this.props.courseID, this.props.timeInfo.timeID );\r\n        }, 500);\r\n    }\r\n\r\n\r\n    //  When the dayOfWeek or session of the time item is changed, update the information respectively\r\n    changeTimeInfo() {\r\n        this.props.changeTimeInfo( this.props.courseID, this.props.timeInfo.timeID, {\r\n            timeID: this.props.timeInfo.timeID,\r\n            dayOfWeek: this.timeDayOfWeekHTML.value,\r\n            session: this.timeSessionHTML.value\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n    render() {\r\n        const { isIslamicWeekend, courseID } = this.props;\r\n        const { timeID, dayOfWeek, session } = this.props.timeInfo;\r\n\r\n        //=================================== JSX ==========================================\r\n        return (\r\n            <div className='course-item__times__entry' id={`course-item__times__entry-${ courseID }-${ timeID }`}>\r\n\r\n                    <button type='button' className='course-item__times__entry__delete-button'\r\n                        onClick={ this.deleteTime } >\r\n                        ✖\r\n                    </button>\r\n\r\n\r\n                    <select className='course-item__times__entry__dayOfWeek' value={ dayOfWeek } onChange={ this.changeTimeInfo } >\r\n                        <option value='0'>{ dayOfWeekIndexConverter(0, isIslamicWeekend, true) }</option>\r\n                        <option value='1'>{ dayOfWeekIndexConverter(1, isIslamicWeekend, true) }</option>\r\n                        <option value='2'>{ dayOfWeekIndexConverter(2, isIslamicWeekend, true) }</option>\r\n                        <option value='3'>{ dayOfWeekIndexConverter(3, isIslamicWeekend, true) }</option>\r\n                        <option value='4'>{ dayOfWeekIndexConverter(4, isIslamicWeekend, true) }</option>\r\n                    </select>\r\n\r\n                    <select className='course-item__times__entry__session' value={ session } onChange={ this.changeTimeInfo } >\r\n                        <option value='0'>02 (8:00am - 9:00am)</option>\r\n                        <option value='1'>03 (9:00am - 10:00am)</option>\r\n                        <option value='2'>04 (10:00am - 11:00am)</option>\r\n                        <option value='3'>05 (11:00am - 12:00pm)</option>\r\n                        <option value='4'>06 (12:00pm - 1:00pm)</option>\r\n                        <option value='5'>07 (1:00pm - 2:00pm)</option>\r\n                        <option value='6'>08 (2:00pm - 3:00pm)</option>\r\n                        <option value='7'>09 (3:00pm - 4:00pm)</option>\r\n                        <option value='8'>10 (4:00pm - 5:00pm)</option>\r\n                        <option value='9'>11 (5:00pm - 6:00pm)</option>\r\n                        <option value='10'>12 (6:00pm - 7:00pm)</option>\r\n                        <option value='11'>13 (7:00pm - 8:00pm)</option>\r\n                    </select>\r\n\r\n                </div>\r\n        );\r\n        //=================================== JSX ==========================================\r\n    }\r\n}\r\n\r\n\r\n\r\n/* =================================================\r\n    Proptypes, MapStateToProps, MapDispatchToProps\r\n==================================================== */\r\nCourseTimeItem.propTypes = {\r\n    isIslamicWeekend: PropTypes.bool.isRequired,\r\n\r\n    deleteTime: PropTypes.func.isRequired,\r\n    changeTimeInfo: PropTypes.func.isRequired\r\n}\r\n\r\n\r\nfunction mapStateToProps(store) {\r\n    return {\r\n        isIslamicWeekend: store.settings.isIslamicWeekend\r\n    }\r\n}\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        deleteTime: ( courseIndexToDel, timeIndexToDel ) => \r\n            dispatch( TimeActions.deleteTime(courseIndexToDel, timeIndexToDel) ),\r\n        changeTimeInfo: ( courseIndexToChange, timeIndexToChange, newTimeValues ) =>\r\n            dispatch( TimeActions.changeTimeInfo(courseIndexToChange, timeIndexToChange, newTimeValues) )\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseTimeItem);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\n//  ContentEditable Library for ContentEditable HTML elements in React\r\nimport ContentEditable from 'react-contenteditable';\r\n\r\n//  Action Creators\r\nimport CourseActions from '../../Redux/Actions/CourseActions';\r\nimport TimeActions from '../../Redux/Actions/TimeActions';\r\n\r\n//  Other React Components\r\nimport CourseTimeItem from './CourseTimeItem.js';\r\n\r\n\r\n\r\nclass CourseItem extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.deleteCourse = this.deleteCourse.bind(this);\r\n        this.changeCourseInfo = this.changeCourseInfo.bind(this);\r\n        this.addTime = this.addTime.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.courseItemHTML = document.getElementById( `course-item-${ this.courseID }`);\r\n        this.courseItemInfoElements = this.courseItemHTML.children[0].children;\r\n        \r\n        this.courseNameHTML = this.courseItemInfoElements[0];\r\n        this.lecturerNameHTML = this.courseItemInfoElements[1];\r\n        this.courseCodeHTML = this.courseItemInfoElements[2];\r\n    }\r\n\r\n\r\n    //  Allow it to animate the fade out first, only then we actually delete the course Item.\r\n    deleteCourse() {\r\n        this.courseItemHTML.classList.add('fade-out');\r\n\r\n        setTimeout(() => {\r\n            this.props.deleteCourse( this.courseID );\r\n        }, 500);\r\n    }\r\n\r\n\r\n    //  Either course Name, lecturer Name, or CourseCode is changed. Update the settings.\r\n    changeCourseInfo() {\r\n        this.props.changeCourseInfo(\r\n            {\r\n                courseID: this.courseID,\r\n                courseName: this.courseNameHTML.textContent,\r\n                lecturerName: this.lecturerNameHTML.textContent,\r\n                courseCode: this.courseCodeHTML.textContent\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n    //  Add a new time slot into the current course item.\r\n    addTime() {\r\n        this.props.addTime( this.courseID );\r\n    }\r\n\r\n\r\n    //  A function to map the courseTimes items (JSON object) into React Components of CourseTimeItem\r\n    timeItemRenderer() {\r\n        return Object.keys( this.props.courseTimes ).map( (timeIdx) => {\r\n            if ( timeIdx !== 'nextTimeID')\r\n                return ( <CourseTimeItem key={timeIdx} courseID={this.courseID} timeInfo={ this.props.courseTimes[timeIdx] } /> );\r\n            return null;\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        this.courseInfo = this.props.courseInfo;\r\n        this.courseID = this.courseInfo.courseID;\r\n        this.courseTimes = this.props.courseTimes;\r\n\r\n        //=================================== JSX ==========================================\r\n        return (\r\n            <div className={`course-item course-item--${ this.courseID % 10 }-theme`} id={`course-item-${ this.courseID }`}>\r\n                <div className='course-item__info'>\r\n\r\n\r\n                    <ContentEditable className='course-item__info__courseName' id={`course-item__info__courseName-${ this.courseID }`}\r\n                        onChange={ this.changeCourseInfo } html={ this.courseInfo.courseName } spellCheck='false'  />\r\n                    <ContentEditable className='course-item__info__lecturerName' id={`course-item__info__lecturerName-${ this.courseID }`}\r\n                    onChange={ this.changeCourseInfo } html={ this.courseInfo.lecturerName } spellCheck='false' />\r\n                    <ContentEditable className='course-item__info__courseCode' id={`course-item__info__courseCode-${ this.courseID }`}\r\n                        onChange={ this.changeCourseInfo } html={ this.courseInfo.courseCode } spellCheck='false' />\r\n\r\n\r\n                    <div className='course-item__info__buttons'>\r\n                        <button type='button' className='course-item__info__buttons__delete-btn'\r\n                            onClick={ this.deleteCourse } >\r\n                            <i className=\"fas fa-trash-alt\"></i>\r\n                        </button>\r\n                        <button type='button' className='course-item__info__buttons__add-button'\r\n                            onClick={ this.addTime } >\r\n                            <i className=\"far fa-clock\"></i>\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div className='course-item__seperator'></div>\r\n\r\n                <div className='course-item__times'>\r\n                    { this.timeItemRenderer() }\r\n                </div>\r\n                \r\n            </div>\r\n        );\r\n        //=================================== JSX ==========================================\r\n    }\r\n}\r\n\r\n\r\n/* =================================================\r\n    Proptypes, MapStateToProps, MapDispatchToProps\r\n==================================================== */\r\nCourseItem.propTypes = {\r\n    deleteCourse: PropTypes.func.isRequired,\r\n    changeCourseInfo: PropTypes.func.isRequired,\r\n    addTime: PropTypes.func.isRequired\r\n}\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        deleteCourse: ( courseIndexToDel ) => dispatch( CourseActions.deleteCourse( courseIndexToDel ) ),\r\n        changeCourseInfo: ( newInfoValues ) => dispatch( CourseActions.changeCourseInfo( newInfoValues ) ),\r\n        addTime: ( courseIndexToAdd ) => dispatch( TimeActions.addTime( courseIndexToAdd ) )\r\n    }\r\n}\r\n\r\n\r\nexport default connect(null, mapDispatchToProps)(CourseItem);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n//  Redux Action Creators\r\nimport CourseActions from '../../Redux/Actions/CourseActions';\r\nimport TimetableActions from '../../Redux/Actions/TimetableActions';\r\n\r\n// Other React Components\r\nimport CourseItem from './CourseItem.js';\r\n\r\n\r\nclass CourseContainer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.addCourse = this.addCourse.bind(this);\r\n        this.courseItemRenderer = this.courseItemRenderer.bind(this);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.courseContainer = document.getElementById('course-window__div');\r\n    }\r\n\r\n\r\n    //  Adds a new course item into the courses div\r\n    addCourse() {\r\n        this.props.addCourse();\r\n\r\n        //  Animate Scroll to bottom after element is inserted, which takes a little bit of time\r\n        setTimeout(() => {\r\n            this.courseContainer.scrollTop = this.courseContainer.scrollHeight;\r\n        }, 50);\r\n    }\r\n\r\n\r\n    //  Converts the array of courses into arrays of CourseItem Component respectively.\r\n    courseItemRenderer() {\r\n        const { courseItems, courseTimeItems } = this.props;\r\n\r\n        const courseHTML = Object.keys( courseItems ).map( (courseID) => {\r\n            return ( <CourseItem key={courseID} courseInfo={courseItems[courseID]} \r\n                courseTimes={courseTimeItems[courseID] } /> );\r\n        });\r\n        return courseHTML;\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        //=================================== JSX ==========================================\r\n        return (\r\n            <main className='course-window' id='course-window'>\r\n\r\n                <div className='course-window__div' id='course-window__div'>\r\n                    { this.courseItemRenderer() }\r\n                </div>\r\n\r\n                <button type='button' className='course-window__add-button' id='course-window__add-button'\r\n                    onClick={ this.addCourse } >\r\n                    +\r\n                </button>\r\n\r\n                <button type='button' className='course-window__view-button' id='course-window__view-button'\r\n                    onClick={ this.props.viewTimetable } >\r\n                    <i className=\"far fa-eye\"></i>\r\n                </button>\r\n            </main>\r\n        );\r\n        //=================================== JSX ==========================================\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n/* =================================================\r\n    Proptypes, MapStateToProps, MapDispatchToProps\r\n==================================================== */\r\nCourseContainer.propTypes = {\r\n    courseItems: PropTypes.object.isRequired,\r\n    courseTimeItems: PropTypes.object.isRequired,\r\n\r\n    addCourse: PropTypes.func.isRequired,\r\n    viewTimetable: PropTypes.func.isRequired\r\n}\r\n\r\n\r\nfunction mapStateToProps(store) {\r\n    return {\r\n        courseItems: store.courseItems,\r\n        courseTimeItems: store.courseTimeItems\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        addCourse: () => dispatch( CourseActions.addCourse() ),\r\n        viewTimetable: () => dispatch( TimetableActions.viewTimetable() )\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseContainer);","import konva from 'konva';\r\n\r\n/* =================================================================================================================\r\nCreates Konva Rectangle Elements or Text elements\r\n=================================================================================================================*/\r\nconst konvaFactory = {\r\n    rectFactory: ( x, y, width, height, fill) => {\r\n        return new konva.Rect({\r\n            x, y, width, height, fill, listening: false\r\n        });\r\n    },\r\n\r\n    textFactory: ( text, x, y, width, height, fontSize, fillColor, fontFamily='Roboto', fontStyle='normal', padding=0 ) => {\r\n        return new konva.Text({\r\n            text, x, y, width, height, fontFamily, fontSize, fontStyle, padding, align: 'center', verticalAlign: 'middle',\r\n            fill: fillColor, listening: false\r\n        })\r\n    }\r\n};\r\n\r\n\r\nexport default konvaFactory;","\r\nimport konva from 'konva';\r\nimport KonvaFactory from './KonvaFactory';\r\nkonva.showWarnings = false;\r\n\r\n//  KonvaFactory.js Destructuring\r\nconst { rectFactory, textFactory } = KonvaFactory;\r\n\r\n\r\n/* =================================================================================================================\r\n    This function is called every time the preview button is clicked, to render and update the timetable\r\n=================================================================================================================*/\r\nfunction TimetableBaseDrawer( canvas, derivedConfig ) {\r\n\r\n    //  Destructuring of the Rendering Properties\r\n    const {\r\n        gridWidth, gridHeight, margin,\r\n        dayOfWeeks, times, sessions,\r\n    \r\n        themeSettings,\r\n    \r\n        timetableWidth, timetableHeight, actualWidth, actualHeight, row1GridHeight, row1ActualHeight\r\n    } = derivedConfig;\r\n\r\n    //  Destructuring of the Theme Properties\r\n    const {\r\n        baseBG, labelBG, sideColorBG, oddRowBG, evenRowBG,\r\n        labelFontColor, fontFamily\r\n    } = themeSettings;\r\n\r\n\r\n    //  Redrawing the bases again. Clearing the Canvas won't do because width and height of timetable might be\r\n    //  changed due to changing of the grid's width, height or the number of sessions.\r\n    while (canvas.firstChild ) {\r\n        canvas.firstChild.remove();\r\n    }\r\n\r\n    const stage = new konva.Stage({\r\n        container: canvas.id,\r\n        width: timetableWidth,\r\n        height: timetableHeight\r\n    });\r\n    stage.container().classList.add('timetable__previewer__wrapper');\r\n\r\n    //  Layer to draw the base\r\n    const layer = new konva.Layer({\r\n        width: timetableWidth,\r\n        height: timetableHeight\r\n    });\r\n\r\n    //  Layer to draw the actual occupied slots. We draw them in TimetableSlotDrawer.js\r\n    const layer2 = new konva.Layer({\r\n        width: timetableWidth,\r\n        height: timetableHeight\r\n    });\r\n\r\n    const rects = [];\r\n    const texts = [];\r\n\r\n    //  Background\r\n    rects.push( rectFactory(0,0, timetableWidth, timetableHeight, baseBG) );\r\n\r\n    //  Labels\r\n    rects.push( rectFactory(margin, margin, actualWidth, row1ActualHeight, labelBG) );\r\n    rects.push( rectFactory(margin, row1GridHeight + margin, actualWidth, row1ActualHeight, labelBG) );\r\n    texts.push( textFactory('Time', margin, margin, actualWidth, row1ActualHeight, 30, labelFontColor, fontFamily) );\r\n    texts.push( textFactory('Session', margin, row1GridHeight + margin, actualWidth, row1ActualHeight, 30, labelFontColor, fontFamily) );\r\n\r\n\r\n    //  Day Of Weeks (Monday, Tuesday...)\r\n    dayOfWeeks.forEach( (dayOfWeek, idx) => {\r\n        rects.push( rectFactory(margin, (gridHeight) + (gridHeight * idx + margin), \r\n            actualWidth, actualHeight, sideColorBG) );\r\n        texts.push( textFactory(dayOfWeek, margin, (gridHeight) + (gridHeight * idx + margin),\r\n            actualWidth, actualHeight, 28, labelFontColor, fontFamily) );\r\n    });\r\n\r\n    //  Times (8am, 9am...)\r\n    //  Starting time is [8 until 19]. From 8 until 11 is a.m. Otherwise p.m.\r\n    //  Ending time is [9 until 20]. From 9 until 11 is a.m. Otherwise p.m.\r\n    times.forEach( (time, idx) => {\r\n        const beginTime = `${time}:00 ${ time >= 8 && time <= 11? 'a.m':'p.m'}`;\r\n        const endTime = `${ (time % 12) + 1 }:00 ${ time >= 8 && time <= 10? 'a.m':'p.m'}`;\r\n\r\n        rects.push( rectFactory( (gridWidth) + (gridWidth * idx + margin), margin, \r\n            actualWidth, row1ActualHeight, sideColorBG) );\r\n        texts.push( textFactory( beginTime, (gridWidth) + (gridWidth * idx + margin), margin,\r\n            actualWidth, row1ActualHeight / 2, 20, labelFontColor, fontFamily) );\r\n        texts.push( textFactory( endTime, (gridWidth) + (gridWidth * idx + margin), margin + row1ActualHeight / 2,\r\n            actualWidth, row1ActualHeight / 2, 20, labelFontColor, fontFamily) );\r\n    });\r\n\r\n    //  Sessions ( 02, 03...)\r\n    sessions.forEach( (session, idx) => {\r\n        rects.push( rectFactory( (gridWidth) + (gridWidth * idx + margin), row1GridHeight + margin, \r\n            actualWidth, row1ActualHeight, sideColorBG) );\r\n        texts.push( textFactory( session, (gridWidth) + (gridWidth * idx + margin), row1GridHeight + margin,\r\n            actualWidth, row1ActualHeight, 30, labelFontColor, fontFamily) );\r\n    });\r\n\r\n    //  Odd Rows Background\r\n    sessions.forEach( (times, idx) => {\r\n        rects.push( rectFactory( (gridWidth) + (gridWidth * idx + margin), gridHeight + margin, \r\n            actualWidth, actualHeight, oddRowBG) );\r\n        rects.push( rectFactory( (gridWidth) + (gridWidth * idx + margin), gridHeight * 3 + margin, \r\n            actualWidth, actualHeight, oddRowBG) );\r\n        rects.push( rectFactory( (gridWidth) + (gridWidth * idx + margin), gridHeight * 5 + margin, \r\n            actualWidth, actualHeight, oddRowBG) );\r\n    })\r\n\r\n    //  Even Rows Background\r\n    sessions.forEach( (times, idx) => {\r\n        rects.push( rectFactory( (gridWidth) + (gridWidth * idx + margin), gridHeight * 2 + margin, \r\n            actualWidth, actualHeight, evenRowBG) );\r\n        rects.push( rectFactory( (gridWidth) + (gridWidth * idx + margin), gridHeight * 4 + margin, \r\n            actualWidth, actualHeight, evenRowBG) );\r\n    })\r\n\r\n    //  Draw each element into canvas\r\n    rects.forEach( (rect) => layer.add(rect) );\r\n    texts.forEach( (text) => layer.add(text) );\r\n    stage.add(layer);\r\n    stage.add(layer2);\r\n\r\n    layer.draw();\r\n\r\n    return stage;\r\n}\r\n\r\nexport default TimetableBaseDrawer;","\r\nimport KonvaFactory from './KonvaFactory';\r\n\r\n\r\nconst { rectFactory, textFactory } = KonvaFactory;\r\n\r\n\r\n/* =================================================================================================================\r\n    This function is called every time after the TimetableBaseDrawer.js is called. This renders the courses\r\n    onto the timetable.\r\n=================================================================================================================*/\r\n\r\n/*\r\n    Structure of each individual renderData:\r\n    {\r\n        courseObj: {\r\n            courseCode:\r\n            courseName:\r\n            lecturerName:\r\n            courseID:\r\n        },\r\n        dayOfWeek:              ( [0 - 4] )\r\n        startingSession:        ( [0 - 11] )\r\n        endingSession:          ( [0 - 11] )\r\n    }\r\n*/\r\nfunction TimetableSlotDrawer( canvas , renderData, derivedConfig) {\r\n\r\n    //  Destructuring of the properties required to draw Timetable courses\r\n    const {\r\n        gridWidth, gridHeight, margin,\r\n        themeSettings,\r\n        courseNameFontSize, lecturerNameFontSize ,courseCodeFontSize,\r\n        actualWidth, actualHeight\r\n    } = derivedConfig;\r\n\r\n    const {\r\n        courseFontColor, fontFamily, colorMaps\r\n    } = themeSettings;\r\n\r\n\r\n    //  The first child is the layer to draw on\r\n    const layer = canvas.getLayers()[1];\r\n\r\n    const rects = [];\r\n    const texts = [];\r\n\r\n    renderData.forEach( course => {\r\n        const { dayOfWeek, startingSession, endingSession } = course;\r\n        const { courseName, lecturerName, courseCode, courseID } = course.courseObj;\r\n\r\n        const isCourseNameEmpty = courseName.length === 0;\r\n        const isLectNameEmpty = lecturerName.length === 0;\r\n        const isCourseCodeEmpty = courseCode.length === 0;\r\n\r\n        const xPosition = gridWidth + startingSession * gridWidth + margin;\r\n        const yPosition = gridHeight + dayOfWeek * gridHeight + margin;\r\n        const width = (endingSession - startingSession + 1) * (actualWidth + (2 * margin) ) - 2 * margin;\r\n\r\n\r\n        rects.push( rectFactory(\r\n            xPosition,\r\n            yPosition,\r\n            width,\r\n            actualHeight,\r\n            colorMaps[courseID % colorMaps.length]\r\n        ) );\r\n\r\n        if (!isCourseNameEmpty)\r\n            texts.push( textFactory(\r\n                courseName,\r\n                xPosition,\r\n                yPosition,\r\n                width,\r\n                actualHeight * heightDeterminer.courseName.heightScale( isLectNameEmpty, isCourseCodeEmpty ),\r\n                courseNameFontSize,\r\n                courseFontColor,\r\n                fontFamily,\r\n                'normal',\r\n                3\r\n            ) );\r\n\r\n        if (!isLectNameEmpty)\r\n            texts.push( textFactory(\r\n                lecturerName,\r\n                xPosition,\r\n                yPosition + actualHeight * heightDeterminer.lectName.yOffset( isCourseNameEmpty, isCourseCodeEmpty ),\r\n                width,\r\n                actualHeight * heightDeterminer.lectName.heightScale( isCourseNameEmpty, isCourseCodeEmpty ),\r\n                lecturerNameFontSize,\r\n                courseFontColor,\r\n                fontFamily,\r\n                'normal',\r\n                3\r\n            ) );\r\n\r\n        if (!isCourseCodeEmpty)\r\n            texts.push( textFactory(\r\n                courseCode,\r\n                xPosition,\r\n                yPosition + actualHeight * heightDeterminer.courseCode.yOffset( isCourseNameEmpty, isLectNameEmpty ),\r\n                width,\r\n                actualHeight * heightDeterminer.courseCode.heightScale( isCourseNameEmpty, isLectNameEmpty ),\r\n                courseCodeFontSize,\r\n                courseFontColor,\r\n                fontFamily,\r\n                'bold',\r\n                3\r\n            ) );\r\n\r\n    })\r\n\r\n    rects.forEach( rect => layer.add(rect) );\r\n    texts.forEach( text => layer.add(text) );\r\n    canvas.add(layer);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//  Function that give corresponding height for texts depending if some fields are empty\r\n//  Eg: When the lecturerName and courseCode is empty, the courseName will span over entire grid\r\nconst heightDeterminer = {\r\n    courseName: {\r\n        heightScale: function( isLectNameEmpty, isCourseCodeEmpty) {\r\n            if (isLectNameEmpty && isCourseCodeEmpty) return 1;\r\n            if (isLectNameEmpty || isCourseCodeEmpty) return 0.75;\r\n            return 0.5;\r\n        }\r\n    },\r\n    lectName: {\r\n        yOffset: function( isCourseNameEmpty, isCourseCodeEmpty) {\r\n            if (isCourseNameEmpty) return 0;\r\n            if (isCourseCodeEmpty) return 0.75;\r\n            return 0.5;\r\n        },\r\n        heightScale: function( isCourseNameEmpty, isCourseCodeEmpty) {\r\n            if (isCourseNameEmpty && isCourseCodeEmpty) return 1;\r\n            if (isCourseCodeEmpty || !isCourseNameEmpty) return 0.25;\r\n            return 0.5;\r\n        }\r\n    },\r\n    courseCode: {\r\n        yOffset: function( isCourseNameEmpty, isLectNameEmpty ) {\r\n            if (isCourseNameEmpty && isLectNameEmpty) return 0;\r\n            if (isCourseNameEmpty) return 0.5;\r\n            return 0.75;\r\n        },\r\n        heightScale: function( isCourseNameEmpty, isCourseCodeEmpty) {\r\n            if (isCourseNameEmpty && isCourseCodeEmpty) return 1;\r\n            if (isCourseNameEmpty) return 0.5;\r\n            return 0.25;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default TimetableSlotDrawer;","/* =================================================================================================================\r\n    Since I implement the Redux store such that it only stores some of the properties of the timetable, \r\n    this is the actual place which a full set of properties required to render the timetable is\r\n    derived.\r\n=================================================================================================================*/\r\n\r\nimport { sliceDayOfWeekArray } from '../LogicUtils/Converters';\r\n\r\n\r\n//  JSON containing the styling for each themes\r\nconst themeDeriver = {\r\n    'default': {\r\n        name: 'default',\r\n        baseBG : 'white',\r\n        labelBG : '#7f8082',\r\n        sideColorBG : '#70ad46',\r\n        oddRowBG : '#c6e0b3',\r\n        evenRowBG : '#a9d08f',\r\n    \r\n        labelFontColor: 'white',\r\n        courseFontColor : 'white',\r\n        fontFamily: 'Roboto',\r\n\r\n        colorMaps : [\r\n            '#3498db',\r\n            '#6ab04c',\r\n            '#e74c3c',\r\n            '#9b59b6',\r\n            '#34495e',\r\n            '#f1c40f',\r\n            '#3a40b6',\r\n            '#2ecc71',\r\n            '#e67e22',\r\n            '#686de0'\r\n        ]\r\n    },\r\n\r\n    'futuristic': {\r\n        name: 'futuristic',\r\n        baseBG : '#2ecc71',\r\n        labelBG : 'black',\r\n        sideColorBG : 'black',\r\n        oddRowBG : '#1b242e',\r\n        evenRowBG : '#212d3b',\r\n    \r\n        labelFontColor: '#29e679',\r\n        courseFontColor : '#29e679',\r\n        fontFamily: 'Orbitron',\r\n\r\n        colorMaps : [\r\n            'black'\r\n        ]\r\n    }, \r\n\r\n    'cuteness': {\r\n        name: 'cuteness',\r\n        baseBG : 'white',\r\n        labelBG : '#ff7199',\r\n        sideColorBG : '#ff7199',\r\n        oddRowBG : '#ffbada',\r\n        evenRowBG : '#ffe2ea',\r\n    \r\n        labelFontColor: 'white',\r\n        courseFontColor : 'white',\r\n        fontFamily: 'Grandstander',\r\n\r\n        colorMaps : [\r\n            '#ff90c3'\r\n        ]\r\n    },\r\n\r\n    'spiderman': {\r\n        name: 'spiderman',\r\n        baseBG : '#cccee3',\r\n        labelBG : '#0861a3',\r\n        sideColorBG : '#0268d7',\r\n        oddRowBG : '#ca141d',\r\n        evenRowBG : '#b31219',\r\n    \r\n        labelFontColor: 'white',\r\n        courseFontColor : 'white',\r\n        fontFamily: 'Marvel',\r\n\r\n        colorMaps : [\r\n            '#8f0505'\r\n        ]\r\n    },\r\n\r\n\r\n    'nature': {\r\n        name: 'nature',\r\n        baseBG : '#392c1d',\r\n        labelBG : '#55422b',\r\n        sideColorBG : '#907a48',\r\n        oddRowBG : '#4f6336',\r\n        evenRowBG : '#4b6b3c',\r\n    \r\n        labelFontColor: '#e6deb9',\r\n        courseFontColor : '#3b2e1e',\r\n        fontFamily: 'Cantora One',\r\n\r\n        colorMaps : [\r\n            '#d4bf88'\r\n        ]\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//  A Constructor Function (use new keyword). Pass in the properties of timetable stored in the Redux store as\r\n//  argument, it will construct a new Object consisting of full set of properties to generate the timetable\r\nfunction timetableConfigDeriver( stateTimetableSettings ) {\r\n\r\n    const { theme, isIslamicWeekend, courseNameFontSize, lecturerNameFontSize, courseCodeFontSize, gridWidth, gridHeight, noOfSessions }\r\n        = stateTimetableSettings;\r\n\r\n    this.gridWidth = gridWidth;\r\n    this.gridHeight = gridHeight;\r\n    this.margin = 2;\r\n\r\n    this.dayOfWeeks = sliceDayOfWeekArray( isIslamicWeekend );\r\n    this.times = [8,9,10,11,12,1,2,3,4,5,6,7];\r\n    this.sessions = ['02','03','04','05','06','07','08','09','10','11','12','13'];\r\n\r\n    this.themeSettings = themeDeriver[ theme ];\r\n    this.courseNameFontSize = courseNameFontSize;\r\n    this.lecturerNameFontSize = lecturerNameFontSize;\r\n    this.courseCodeFontSize = courseCodeFontSize;\r\n\r\n    //  Auto computed ============================\r\n    this.timetableWidth = this.gridWidth * ( Number(noOfSessions) + 1);\r\n    this.timetableHeight = this.gridHeight * 6;\r\n    this.actualWidth = this.gridWidth - 2 * this.margin;\r\n    this.actualHeight = this.gridHeight - 2 * this.margin;\r\n\r\n    this.row1GridHeight = this.gridHeight / 2;\r\n    this.row1ActualHeight = this.row1GridHeight - this.margin * 2;\r\n}\r\n\r\n\r\nexport { themeDeriver, timetableConfigDeriver };","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\n//  Action Creators\r\nimport TimetableActions from '../Redux/Actions/TimetableActions';\r\n\r\n//  Timetable Drawing Functions\r\nimport TimetableBaseDrawer from '../LogicUtils/TimetableBaseDrawer';\r\nimport TimetableSlotDrawer from '../LogicUtils/TimetableSlotDrawer';\r\nimport { timetableConfigDeriver } from '../LogicUtils/TimetableConfigDeriver';\r\n\r\n\r\n\r\n\r\nclass TimetablePreviewer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.timetableHTML = React.createRef();\r\n        this.timetableCanvasWindow = React.createRef();\r\n\r\n        this.closePreviewBtnHandler = this.closePreviewBtnHandler.bind(this);\r\n        this.downloadBtnHandler = this.downloadBtnHandler.bind(this);\r\n        this.openTabBtnHandler = this.openTabBtnHandler.bind(this);\r\n    }\r\n\r\n    \r\n    //  If the preview window is open, then we'll update the timetable by redrawing it again\r\n    componentDidUpdate() {\r\n        if (this.props.isPreviewOpen) {\r\n            const derivedConfig = new timetableConfigDeriver( this.props.settings );\r\n\r\n            this.canvasStage = TimetableBaseDrawer( this.timetableCanvasWindow.current, derivedConfig );\r\n            TimetableSlotDrawer( this.canvasStage, this.props.timetableRenderData, derivedConfig );\r\n        }\r\n    }\r\n\r\n    //  Allows for animation to take place first, then only close it\r\n    closePreviewBtnHandler() {\r\n        this.timetableHTML.current.classList.add('transitionOut');\r\n\r\n        setTimeout(() => {\r\n            this.timetableHTML.current.classList.remove('transitionOut');\r\n            this.props.closePreview();\r\n        }, 800);\r\n    }\r\n\r\n\r\n    //  Convert the Canvas to DataURL, load URL into a created anchor tag, and simulate click to download png\r\n    downloadBtnHandler() {\r\n        const tempLink = document.createElement('a');\r\n        tempLink.download = 'timetable';\r\n        tempLink.href = this.canvasStage.toDataURL();\r\n        tempLink.click();\r\n        tempLink.remove();\r\n    }\r\n\r\n    //  Opens a new tab (Hopefully for those who unable to directly download from the download button, this works\r\n    //  for them). Then on the new tab write the image data into it.\r\n    openTabBtnHandler() {\r\n        const img = new Image();\r\n        img.src = this.canvasStage.toDataURL();\r\n        img.onload = ()=> {\r\n            const w = window.open();\r\n            w.document.write(`\r\n            <style>\r\n                img {\r\n                    width: 100%;\r\n                    height: auto;\r\n                }\r\n            </style>\r\n            ` + img.outerHTML);\r\n            w.document.close();\r\n        }\r\n    }\r\n\r\n    \r\n    render() {\r\n        const { isPreviewOpen } = this.props;\r\n        //=================================== JSX ==========================================\r\n        return (\r\n            <div className={`timetable ${isPreviewOpen? '':'hidden' }`} ref={ this.timetableHTML } >\r\n\r\n                <div className='timetable__previewer' id='timetable__previewer'>\r\n                    <button type='button' className='timetable__previewer__closebtn' id='timetable__previewer__closebtn'\r\n                        onClick={ this.closePreviewBtnHandler } >\r\n                        <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n\r\n                    <div className='timetable__previewer__wrapper' id='timetable__previewer__wrapper'\r\n                          ref={ this.timetableCanvasWindow } >\r\n                    </div>\r\n\r\n                    <div className='timetable__previewer__btnDiv' id='timetable__previewer__btnDiv'>\r\n                        <button type='button' className='timetable__previewer__downloadbtn' id='timetable__previewer__downloadbtn'\r\n                            onClick={this.downloadBtnHandler} >\r\n                            Download as png\r\n                        </button>\r\n\r\n                        <button type='button' className='timetable__previewer__openTab' id='timetable__previewer__openTab'\r\n                            onClick={this.openTabBtnHandler} >\r\n                            Open in new tab\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n        //=================================== JSX ==========================================\r\n    }\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n\r\n/* =================================================\r\n    Proptypes, MapStateToProps, MapDispatchToProps\r\n==================================================== */\r\nTimetablePreviewer.propTypes = {\r\n    isPreviewOpen: PropTypes.bool.isRequired,\r\n    timetableRenderData: PropTypes.array,\r\n    settings: PropTypes.object.isRequired,\r\n\r\n    closePreview: PropTypes.func.isRequired\r\n}\r\n\r\nfunction mapStateToProps( store ) {\r\n    return {\r\n        isPreviewOpen: store.isPreviewOpen,\r\n        timetableRenderData: store.timetableRenderData,\r\n        settings: store.settings\r\n    };\r\n}\r\n\r\n\r\n\r\nfunction mapDispatchToProps( dispatch ) {\r\n    return {\r\n        closePreview: ()=> dispatch( TimetableActions.closePreview() )\r\n    };\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TimetablePreviewer);","import ActionTypes from './ActionTypes';\r\n\r\nconst SettingActions = {\r\n\r\n    openSetting: function() {\r\n        return {\r\n            type: ActionTypes.OPEN_SETTING\r\n        };\r\n    },\r\n\r\n    closeSetting: function() {\r\n        return {\r\n            type: ActionTypes.CLOSE_SETTING\r\n        };\r\n    },\r\n\r\n    changeSetting: function( settingEvent ) {\r\n        return {\r\n            type: ActionTypes.CHANGE_SETTING,\r\n            payload: {\r\n                settingEvent\r\n            }\r\n        };\r\n    },\r\n\r\n    saveSetting: function() {\r\n        return {\r\n            type: ActionTypes.SAVE_SETTING\r\n        }\r\n    },\r\n\r\n    loadSetting: function() {\r\n        return {\r\n            type: ActionTypes.LOAD_SETTING\r\n        }\r\n    },\r\n\r\n    delSetting: function() {\r\n        return {\r\n            type: ActionTypes.DEL_SETTING\r\n        }\r\n    }\r\n\r\n};\r\n\r\n\r\nexport default SettingActions;\r\n\r\n\r\n","import React from 'react';\r\n\r\n\r\nfunction SettingLocalStorage(props) {\r\n    return (\r\n        <div className='settings__category settings__savedel'>\r\n            <h4 className='settings__category__title'>\r\n                <span role='img' aria-label='disk logo'>💾</span> \r\n                Manage Timetable \r\n                <span role='img' aria-label='disk logo'>💾</span>\r\n            </h4>\r\n            <div className='settings__savedel__wrapper'>\r\n\r\n                <div className='settings__savedel__div'>\r\n                    <label htmlFor='save_timetable'>Save</label>\r\n                    <button className='settings__savedel__btn' onClick={ props.saveSetting }\r\n                        title='Save Timetable' >\r\n                        <i className=\"fas fa-save\"></i>\r\n                    </button>\r\n                </div>\r\n                <div className='settings__savedel__div'>\r\n                    <label htmlFor='load_timetable'>Load</label>\r\n                    <button className='settings__savedel__btn' onClick={ props.loadSetting }\r\n                        title='Load Timetable' >\r\n                        <i className=\"fas fa-upload\"></i>\r\n                    </button>\r\n                </div>\r\n                <div className='settings__savedel__div'>\r\n                    <label htmlFor='delete_timetable'>Delete</label>\r\n                    <button className='settings__savedel__btn' onClick={ props.delSetting }\r\n                        title='Clear Timetable' >\r\n                        <i className=\"fas fa-trash-alt\"></i>\r\n                    </button>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SettingLocalStorage;","\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction SettingGeneral( props ) {\r\n    return (\r\n        <div className='settings__category settings__general'>\r\n            <h4 className='settings__category__title'>General</h4>\r\n\r\n            <div className='settings__general__wrapper'>\r\n                <div className='settings__general__theme'>\r\n                    <p className='settings__general__subtitle'>\r\n                        <span role='img' aria-label='color palette logo'>🎨</span>\r\n                            Theme \r\n                        <span role='img' aria-label='color palette logo'>🎨</span>\r\n                    </p>\r\n                    <select className='settings__general__select' value={ props.theme } id='theme'\r\n                            onChange={ props.changeSetting } title='Preset color theme for your timetable' >\r\n                        <option value='default'>Default</option>\r\n                        <option value='futuristic'>Futuristic</option>\r\n                        <option value='cuteness'>Cuteness</option>\r\n                        <option value='spiderman'>Spiderman</option>\r\n                        <option value='nature'>Nature</option>\r\n                    </select>\r\n                </div>\r\n\r\n                <div className='settings__general__weekend'>\r\n                    <p className='settings__general__subtitle'>\r\n                        <span role='img' aria-label='calendar logo'>📅</span> \r\n                        Weekend \r\n                        <span role='img' aria-label='calendar logo'>📅</span> \r\n                        </p>\r\n                    <select className='settings__general__select' value={ props.isIslamicWeekend? 0: 1 } id='weekend'\r\n                            onChange={ props.changeSetting } title='Select the 2 weekends according to your Malaysia State' >\r\n                        <option value='0'>Friday / Saturday</option>\r\n                        <option value='1'>Saturday / Sunday</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className='settings__general__wrapper'>\r\n                <div className='settings__general__columns'>\r\n                    <h4 className='settings__general__subtitle'>No. of Columns</h4>\r\n                    <select className='settings__noSessions__select' id='noOfSessions' value={ props.noOfSessions } \r\n                        onChange={ props.changeSetting } title='How many column will exist in your timetable'>\r\n                        <option value='1'>1</option>\r\n                        <option value='2'>2</option>\r\n                        <option value='3'>3</option>\r\n                        <option value='4'>4</option>\r\n                        <option value='5'>5</option>\r\n                        <option value='6'>6</option>\r\n                        <option value='7'>7</option>\r\n                        <option value='8'>8</option>\r\n                        <option value='9'>9</option>\r\n                        <option value='10'>10</option>\r\n                        <option value='11'>11</option>\r\n                        <option value='12'>12</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    );\r\n}\r\n\r\nSettingGeneral.propTypes = {\r\n    theme: PropTypes.string.isRequired,\r\n    isIslamicWeekend: PropTypes.bool.isRequired,\r\n    noOfSessions: PropTypes.number.isRequired,\r\n    \r\n    changeSetting: PropTypes.func.isRequired\r\n}\r\n\r\nexport default SettingGeneral;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction SettingGridProps(props) {\r\n    const { courseNameFontSize, lecturerNameFontSize, courseCodeFontSize, gridWidth, gridHeight, } = props.settings;\r\n    const { renderProp, changeSetting } = props;\r\n\r\n    return (\r\n        <div className='settings__category settings__gridProps'>\r\n            <h4 className='settings__category__title'>\r\n                <span role='img' aria-label='ruler logo'>📏</span> \r\n                Grid Properties\r\n                <span role='img' aria-label='ruler logo'>📏</span> \r\n            </h4>\r\n\r\n            <div className='settings__gridProps__wrapper'>\r\n                <div className='settings__gridProps__inputGroup'>\r\n                    <label htmlFor='gridWidth'>Grid Width</label>\r\n                    <input type='number' id='gridWidth' value={ gridWidth } min='0' max='400'\r\n                        onChange={ changeSetting } />\r\n                </div>\r\n                <div className='settings__gridProps__inputGroup'>\r\n                    <label htmlFor='gridHeight'>Grid Height</label>\r\n                    <input type='number' id='gridHeight' value={ gridHeight } min='0' max='400'\r\n                        onChange={ changeSetting } />\r\n                </div>\r\n            </div>\r\n\r\n            <div className='settings__gridProps__wrapper'>\r\n                <div className='settings__gridProps__inputGroup'>\r\n                    <label htmlFor='courseName-fontsize'>Course Name Font size</label>\r\n                    <input type='number' id='courseName-fontsize' value={ courseNameFontSize } min='0' max='70'\r\n                        onChange={ changeSetting } />\r\n                </div>\r\n                <div className='settings__gridProps__inputGroup'>\r\n                    <label htmlFor='lecturerName-fontsize'>Lecturer Name Font size</label>\r\n                    <input type='number' id='lecturerName-fontsize' value={ lecturerNameFontSize } min='0' max='70'\r\n                        onChange={ changeSetting } />\r\n                </div>\r\n                <div className='settings__gridProps__inputGroup'>\r\n                    <label htmlFor='courseCode-fontsize'>Course Code Font size</label>\r\n                    <input type='number' id='courseCode-fontsize' value={ courseCodeFontSize } min='0' max='70'\r\n                        onChange={ changeSetting } />\r\n                </div>\r\n            </div>\r\n\r\n            <h4 className='settings__category__title'>Example Grid</h4>\r\n\r\n            <div style={ {\r\n                fontFamily: renderProp.fontFamily,\r\n                backgroundColor: renderProp.sideColorBG,\r\n                color: renderProp.labelFontColor,\r\n                border: `solid 4px ${renderProp.baseBG}`,\r\n                width: gridWidth, \r\n                height: gridHeight\r\n                } } \r\n                className='settings__gridProps__preview'>\r\n                <p style={ {fontSize: courseNameFontSize} }>Engineering Basics</p>\r\n                <p style={ {fontSize: lecturerNameFontSize} }>Dr. Ali bin Ahmed</p>\r\n                <p style={ {fontSize: courseCodeFontSize} }>AC20142</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nSettingGridProps.propTypes = {\r\n    settings: PropTypes.object.isRequired,\r\n    renderProp: PropTypes.object.isRequired,\r\n    \r\n    changeSetting: PropTypes.func.isRequired\r\n}\r\n\r\nexport default SettingGridProps;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n//  Action Creators\r\nimport SettingActions from '../../Redux/Actions/SettingActions';\r\n\r\n//  Theme properties Deriver, to render preview\r\nimport { themeDeriver } from '../../LogicUtils/TimetableConfigDeriver';\r\n\r\n//  Setting Components\r\nimport SettingLocalStorage from './SettingLocalStorage';\r\nimport SettingGeneral from './SettingGeneral';\r\nimport SettingGridProps from './SettingGridProps';\r\n\r\n\r\nclass TimetableSettings extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.settingHTML = React.createRef();\r\n\r\n        this.closeSettingButtonHandler = this.closeSettingButtonHandler.bind(this);\r\n    }\r\n\r\n\r\n    //  The state will store the theme information to render the preview (color, fontfamily...)\r\n    state = {\r\n        renderProperties: themeDeriver[ this.props.settings.theme ]\r\n    }\r\n\r\n    //  Upon settings changed, update the theme informations so the preview can also be updated\r\n    static getDerivedStateFromProps( newProps, prevState ) {\r\n        if ( newProps.settings.theme === prevState.renderProperties.name ) return prevState;\r\n        return Object.assign({}, prevState, { renderProperties: themeDeriver[ newProps.settings.theme] } );\r\n    }\r\n\r\n\r\n    //  Allow the div to undergo animation first, then only we close the div entirely\r\n    closeSettingButtonHandler() {\r\n        this.settingHTML.current.classList.add('transitionOut');\r\n\r\n        setTimeout(() => {\r\n            this.settingHTML.current.classList.remove('transitionOut');\r\n            this.props.closeSetting();\r\n        }, 800);\r\n    }\r\n\r\n\r\n\r\n\r\n    render() {\r\n        const { gridWidth, gridHeight, noOfSessions } = this.props.settings;\r\n\r\n        //=================================== JSX ==========================================\r\n        return (\r\n            <div className={`settings ${this.props.isSettingOpen? '':'hidden'}`} id='settings'\r\n                ref={ this.settingHTML } >\r\n\r\n                    <button type='button' className='settings__closebtn' id='settings__closebtn'\r\n                         onClick={ this.closeSettingButtonHandler }>\r\n                        <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n                \r\n                <h3 className='settings__title'>\r\n                    <span role='img' aria-label='spanner logo'>🛠️</span> \r\n                    Settings\r\n                    <span role='img' aria-label='spanner logo'>🛠️</span> \r\n                </h3>\r\n                \r\n                <p className='settings__version'>Version: v {this.props.version}</p>\r\n\r\n                <p className='settings__sizeEstimateMsg'>\r\n                    Your timetable should be of size:<br/>\r\n                    <span className='settings__sizeEstimateMsg__value'>{`${gridWidth * (Number(noOfSessions) + 1)}px `}</span> \r\n                    x \r\n                    <span className='settings__sizeEstimateMsg__value'>{` ${gridHeight * 6}px`}</span>\r\n                </p>\r\n                \r\n                <div className='settings__wrapper'>\r\n                    <SettingLocalStorage saveSetting={ this.props.saveSetting } loadSetting={ this.props.loadSetting}\r\n                        delSetting={ this.props.delSetting } />\r\n\r\n                    <SettingGeneral theme={ this.props.settings.theme} isIslamicWeekend={ this.props.settings.isIslamicWeekend } \r\n                        noOfSessions={ this.props.settings.noOfSessions } changeSetting={ this.props.changeSetting } />\r\n\r\n                    <SettingGridProps settings={this.props.settings} renderProp={ this.state.renderProperties }\r\n                        changeSetting={ this.props.changeSetting } />\r\n                </div>\r\n            </div>\r\n        );\r\n        //=================================== JSX ==========================================\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n/* =================================================\r\n    Proptypes, MapStateToProps, MapDispatchToProps\r\n==================================================== */\r\nTimetableSettings.propTypes = {\r\n    version: PropTypes.string.isRequired,\r\n    isSettingOpen: PropTypes.bool.isRequired,\r\n    settings: PropTypes.object.isRequired,\r\n\r\n    closeSetting: PropTypes.func.isRequired,\r\n    changeSetting: PropTypes.func.isRequired,\r\n\r\n    saveSetting: PropTypes.func.isRequired,\r\n    loadSetting: PropTypes.func.isRequired,\r\n    delSetting: PropTypes.func.isRequired,\r\n}\r\n\r\nfunction mapStateToProps( store ) {\r\n    return {\r\n        version: store.version,\r\n        isSettingOpen: store.isSettingOpen,\r\n        settings: store.settings\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps( dispatch ) {\r\n    return {\r\n        closeSetting: () => dispatch( SettingActions.closeSetting() ),\r\n        changeSetting: (event) => dispatch( SettingActions.changeSetting(event) ),\r\n\r\n        saveSetting: () => dispatch( SettingActions.saveSetting() ),\r\n        loadSetting: () => dispatch( SettingActions.loadSetting() ),\r\n        delSetting: () => dispatch( SettingActions.delSetting() ),\r\n    };\r\n}\r\n\r\n\r\nexport default connect( mapStateToProps, mapDispatchToProps)(TimetableSettings);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n//  Just a blocker, which greys out the background and block input when either\r\n//  Settings div or Preview div is open\r\nfunction Blocker(props) {\r\n    return (\r\n        <div className={`blocker ${ props.isBlocking? 'blocking':''}`} />\r\n    )\r\n}\r\n\r\n\r\n/* =================================================\r\n    Proptypes, MapStateToProps, MapDispatchToProps\r\n==================================================== */\r\nBlocker.propTypes = {\r\n    isBlocking: PropTypes.bool.isRequired\r\n}\r\n\r\nfunction mapStateToProps( store ) {\r\n    return {\r\n        isBlocking: store.isPreviewOpen || store.isSettingOpen\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Blocker);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Other React Components\r\nimport CourseContainer from './CourseList/CourseContainer.js'\r\nimport TimetablePreviewer from './TimetablePreviewer';\r\nimport TimetableSettings from './TimetableSettings/TimetableSettings';\r\nimport Blocker from './Blocker';\r\n\r\n//  Redux ActionCreators\r\nimport SettingActions from '../Redux/Actions/SettingActions';\r\n\r\n\r\nclass MainDiv extends React.Component {\r\n\r\n    render() {\r\n        //=================================== JSX ==========================================\r\n        return (\r\n            <div className='container' id='container'>\r\n                <header className='header' id='header'>\r\n                    <img className='header__logo' id='header__logo' \r\n                        src='https://upload.wikimedia.org/wikipedia/commons/8/81/UTM-LOGO.png' alt='Logo of UTM'/>\r\n                    <h1 className='header__title' id='header__title'>UTM Timetable Generator</h1>\r\n                    <button className='header__setting' id='header__setting' type='button'\r\n                        onClick={ this.props.openSetting } >\r\n                        <i className=\"fas fa-cog header__setting__cog1\"></i>\r\n                        <i className=\"fas fa-cog header__setting__cog2\"></i>\r\n                    </button>\r\n                </header>\r\n\r\n                <Blocker />\r\n\r\n                <CourseContainer />\r\n\r\n                <TimetablePreviewer />\r\n\r\n                <TimetableSettings />\r\n\r\n                <footer className='footer' id='footer'>\r\n                    <a href='https://github.com/AdmiJW/UTM_Timetable_Generator/issues' target='_blank' rel='noopener noreferrer'\r\n                        className='footer__support' id='footer__support'>\r\n                        <h3 className='footer__support__text'>Support</h3>\r\n                        <img className='footer__support__logo' src='https://icons-for-free.com/iconfiles/png/512/github+hub+icon+icon-1320194641335079152.png'\r\n                            alt='github logo'/>\r\n                    </a>\r\n                    <p className='footer__desc'>An open source project</p>\r\n                </footer>\r\n            </div>\r\n        );\r\n        //=================================== JSX ==========================================\r\n    }\r\n\r\n}\r\n\r\n\r\n/* =================================================\r\n    Proptypes, MapStateToProps, MapDispatchToProps\r\n==================================================== */\r\nMainDiv.propTypes = {\r\n    openSetting: PropTypes.func.isRequired\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        openSetting: () => dispatch( SettingActions.openSetting() )\r\n    };\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(MainDiv);","//  React and Redux\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from 'react-redux';\n\nimport store from './Redux/Store/Store';\n\n//  Stylesheet\nimport './Styles/style.css';\n\n//  React Main Component\nimport MainDiv from './Components/MainDiv.js';\n\n//  Load the Web Fonts using Font Face Observer API\nimport FontFaceObserver from 'fontfaceobserver';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store} >\n    <MainDiv />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n\n//  Load the web fonts so that the canvas can draw the correct font family correctly\n//  All the fonts loaded from the web shall be listed here\nconst webFonts = ['Orbitron', 'Roboto', 'Grandstander', 'Marvel', 'Cantora One'];\n\nwebFonts.forEach( font => {\n    const fontObj = new FontFaceObserver(font);\n    fontObj.load().then( (e) => {\n      \n    }).catch( (e) => {\n        console.log( \"Loading of Web Font '\" + font + \"' Failed!\");\n    });\n});"],"sourceRoot":""}